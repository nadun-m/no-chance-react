(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(40)},24:function(e,t,a){},26:function(e,t,a){},29:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(15),r=a.n(o),l=a(3),i=a(4),c=a(7),m=a(6),d=a(8),u=a(2),h=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.username;return s.a.createElement("div",{className:"profile layout--center"},s.a.createElement("div",{className:"profile__picture"},s.a.createElement("svg",{height:"36",width:"36"},s.a.createElement("circle",{cx:"18",cy:"18",r:"18",fill:"#5c5f6f"}))),s.a.createElement("div",{className:"profile__name"},e))}}]),t}(n.Component),p=(a(24),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleLoginModal=a.handleLoginModal.bind(Object(u.a)(Object(u.a)(a))),a.handleLogout=a.handleLogout.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleLoginModal",value:function(){this.props.handleLoginModal()}},{key:"handleLogout",value:function(){this.props.handleLogout()}},{key:"render",value:function(){var e,t=this.props.isLoggedIn,a=this.props.username;return e=t?s.a.createElement("span",{onClick:this.handleLogout},"Sign Out"):s.a.createElement("span",{onClick:this.handleLoginModal},"Join"),s.a.createElement("section",{className:"header layout--center"},s.a.createElement("div",{className:"header__content layout--wrapped"},s.a.createElement("div",{className:"brand"},s.a.createElement("a",{href:"/"},s.a.createElement("div",{className:"brand__name"},s.a.createElement("span",null,"#"),"DEVRANT"))),t?s.a.createElement(h,{username:a}):"",s.a.createElement("div",{className:"join"},e)))}}]),t}(n.Component)),E=(a(26),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.isLoading?s.a.createElement("div",{className:"loader"},s.a.createElement("div",{className:"spinner"})):""}}]),t}(n.Component)),v=a(41),g=a(10),f=a.n(g),b=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"isLogged",value:function(){return!f.a.isEmpty(this.getLocals("token"))}},{key:"setLocals",value:function(e){localStorage.setItem("token",e.token),localStorage.setItem("username",e.username)}},{key:"getLocals",value:function(e){return localStorage.getItem(e)}},{key:"removeLocals",value:function(e){f.a.each(e,function(e){return localStorage.removeItem(e)})}}]),e}(),y={SERVER_ERROR:"Server error",INVALID_TOKEN:"Invalid token",INVALID_CREDENTIALS:"Invalid username or password"},L=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"call",value:function(e){var t=new Headers;t.append("Content-Type","application/json"),b.isLogged()&&t.append("X-Token",b.getLocals("token"));var a={method:e.method,headers:t};return"POST"===e.method&&(a.body=JSON.stringify(e.param)),new Promise(function(t,n){fetch(e.url,a).then(function(e){return e.json()}).then(function(e){e.ok?t(e):n(y[e.error])}).catch(function(e){n(y[e.error])})})}}]),e}(),_=(a(29),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={myVote:a.props.post.myVote},a.handleVote=a.handleVote.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleVote",value:function(e){var t=this;if(e.preventDefault(),b.isLogged()){var a=0!==this.state.myVote?"reset":e.target.dataset.vote,n=this.props.post;L.call({method:"POST",url:"https://api.devrant.thusitha.site/v1/post.vote",param:{postId:n.id,direction:a}}).then(function(e){e.ok&&(t.setState({myVote:e.post.myVote}),t.props.loadPosts())}).catch(function(e){}).then(function(){})}else this.props.handleLoginModal()}},{key:"render",value:function(){var e=this.props.post,t=e.myVote>0?"checked":"",a=e.myVote<0?"checked":"";return s.a.createElement("article",{className:"post"},s.a.createElement(v.a,{to:"/rant/"+e.id},s.a.createElement("div",{className:"post__inner"},s.a.createElement("div",{className:"score"},s.a.createElement("div",{className:"score__up layout--center "+t,"data-vote":"up",onClick:this.handleVote},"++"),s.a.createElement("div",{className:"score__board layout--center"},e.votes),s.a.createElement("div",{className:"score__down layout--center "+a,"data-vote":"down",onClick:this.handleVote},"--")),s.a.createElement("div",{className:"post__body"},e.content)),s.a.createElement("div",{className:"post__footer"},s.a.createElement("div",{className:"post__time"},e.displayTime),s.a.createElement("div",{className:"post__comments"},s.a.createElement("svg",{className:"icon",viewBox:"0 0 31 32"},s.a.createElement("path",{d:"M24.732 24.371v7.629l-7.267-7.267h-8.808c-4.781 \r 0-8.657-3.875-8.657-8.657v-7.42c0-4.781 3.876-8.657 \r 8.657-8.657h13.604c4.781 0 8.657 3.875 8.657 8.657v7.42c0 \r 3.922-2.61 7.23-6.186 8.294z"})),e.commentCount))))}}]),t}(n.Component)),O=(a(33),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).initState={isLoading:!0,posts:[]},a.state=a.initState,a.handleLoginModal=a.handleLoginModal.bind(Object(u.a)(Object(u.a)(a))),a.loadPosts=a.loadPosts.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"loadPosts",value:function(){var e=this;this.setState({isLoading:!0}),document.getElementById("postList").style.display="none",L.call({method:"GET",url:"https://api.devrant.thusitha.site/v1/post.list",param:""}).then(function(t){t.ok&&e.setState({posts:t.posts})}).catch(function(e){}).then(function(){e.setState({isLoading:!1}),document.getElementById("postList").style.display="block"})}},{key:"componentDidMount",value:function(){this.loadPosts()}},{key:"handleLoginModal",value:function(){this.props.handleLoginModal()}},{key:"render",value:function(){var e=this,t=this.state.isLoading;return s.a.createElement("div",null,s.a.createElement("div",{className:"post-list",id:"postList"},this.state.posts.map(function(t,a){return s.a.createElement(_,{loadPosts:e.loadPosts,handleLoginModal:e.handleLoginModal,post:t,key:a})}),s.a.createElement("div",{className:"rant__add",title:"Add Rant"},"+")),s.a.createElement(E,{isLoading:t}))}}]),t}(n.Component)),N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"rant-details layout--center"},s.a.createElement("section",{className:"post-hero"},s.a.createElement("div",{className:"post-hero__inner"},s.a.createElement("div",{className:"score"},s.a.createElement("div",{className:"score__up layout--center"},"++"),s.a.createElement("div",{className:"score__board layout--center"},"100"),s.a.createElement("div",{className:"score__down layout--center"},"--")),s.a.createElement("div",{className:"post-hero__body"},s.a.createElement("div",{className:"profile"},s.a.createElement("div",{className:"profile__picture"},s.a.createElement("svg",{height:"36",width:"36"},s.a.createElement("circle",{cx:"18",cy:"18",r:"18",fill:"#5c5f6f"}))),s.a.createElement("div",{className:"profile__name"},"Elon")),s.a.createElement("div",{className:"post__details"},"Lorem ipsum"))),s.a.createElement("div",{className:"post-hero__footer"},s.a.createElement("div",{className:"post-hero__delete"},"DELETE"),s.a.createElement("div",{className:"post-hero__time"},"2m ago"))),s.a.createElement("section",{className:"comments layout--center"},s.a.createElement("h1",{className:"comments__title"},s.a.createElement("span",null,"#"),"Comments"),s.a.createElement("section",{className:"comment"},s.a.createElement("div",{className:"comment__inner"},s.a.createElement("div",{className:"comment__body"},s.a.createElement("div",{className:"profile"},s.a.createElement("div",{className:"profile__picture"},s.a.createElement("svg",{height:"36",width:"36"},s.a.createElement("circle",{cx:"18",cy:"18",r:"18",fill:"#5c5f6f"}))),s.a.createElement("div",{className:"profile__name"},"Elon")),s.a.createElement("div",{className:"post__details"},"Lorem ipsum",s.a.createElement("br",null)))),s.a.createElement("div",{className:"comment__footer"},s.a.createElement("div",{className:"comment__delete"},"DELETE"),s.a.createElement("div",{className:"comment__time"},"2m ago")))),s.a.createElement("div",{className:"rant__comment layout--center",title:"Comment"},s.a.createElement("svg",{className:"icon",viewBox:"0 0 31 32",width:"100%",height:"100%"},s.a.createElement("path",{d:"M24.732 24.371v7.629l-7.267-7.267h-8.808c-4.781 \r 0-8.657-3.875-8.657-8.657v-7.42c0-4.781 3.876-8.657 \r 8.657-8.657h13.604c4.781 0 8.657 3.875 8.657 8.657v7.42c0 \r 3.922-2.61 7.23-6.186 8.294z"}))))}}]),t}(n.Component),j=a(16),k=(a(35),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).initialState={isLoading:!1,username:"",password:"",usernameError:!1,passwordError:!1,httpError:{isError:!1,message:""}},a.state=a.initialState,a.handleLoginModal=a.handleLoginModal.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a.handleInput=a.handleInput.bind(Object(u.a)(Object(u.a)(a))),a.handleBlur=a.handleBlur.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleLoginModal",value:function(){this.setState({username:"",password:"",usernameError:!1,passwordError:!1}),this.props.handleLoginModal()}},{key:"handleInput",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(j.a)({},a,n))}},{key:"handleBlur",value:function(e){var t=e.target,a=t.name,n=t.value;"username"===a?this.setState({usernameError:f.a.isEmpty(n),httpError:{isError:!1,message:""}}):this.setState({passwordError:f.a.isEmpty(n),httpError:{isError:!1,message:""}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),f.a.isEmpty(this.state.username)&&(this.setState({usernameError:!0,httpError:{isError:!1,message:""}}),this.usernameInput.focus()),f.a.isEmpty(this.state.password)&&(this.setState({passwordError:!0,httpError:{isError:!1,message:""}}),f.a.isEmpty(this.state.username)||this.passwordInput.focus()),this.state.usernameError||this.state.passwordError||(this.setState({isLoading:!0}),document.getElementById("usernameInput").style.display="none",document.getElementById("passwordInput").style.display="none",document.getElementById("submitBtn").setAttribute("disabled",!0),L.call({method:"POST",url:"https://api.devrant.thusitha.site/v1/user.activate",param:{username:this.state.username,password:this.state.password}}).then(function(e){e.ok?(t.setState({httpError:{isError:!1,message:""}}),t.handleLogin(e.username,e.token)):t.setState({httpError:{isError:!0,message:e.error}})}).catch(function(e){t.setState({httpError:{isError:!0,message:e}})}).then(function(){t.setState({isLoading:!1}),document.getElementById("usernameInput").style.display="block",document.getElementById("passwordInput").style.display="block",document.getElementById("submitBtn").removeAttribute("disabled")}))}},{key:"handleLogin",value:function(e,t){this.props.handleLogin(e,t)}},{key:"render",value:function(){var e=this,t=this.state.isLoading,a=this.state,n=a.username,o=a.password,r=a.usernameError,l=a.passwordError,i=a.httpError;return s.a.createElement("div",{className:"popup",id:"loginModal"},s.a.createElement("div",{className:"popup__header"},s.a.createElement("div",{title:"Close",className:"close layout--center",onClick:this.handleLoginModal},"X")),s.a.createElement("div",{className:"popup__body layout--center"},s.a.createElement("div",{className:"popup__body-inner"},s.a.createElement("div",{className:"form"},s.a.createElement("div",{className:"form__title"},"JOIN ",s.a.createElement("span",{className:"highlight"},"#"),"DEVRANT"),s.a.createElement("div",{className:"form__description"},"Vote and comment on others' rants. Post your own."),s.a.createElement("form",{className:"login"},s.a.createElement("div",{className:"login"},s.a.createElement("input",{type:"text",placeholder:"USERNAME",name:"username",id:"usernameInput",value:n,ref:function(t){e.usernameInput=t},onChange:this.handleInput,onBlur:this.handleBlur}),s.a.createElement("input",{type:"password",placeholder:"PASSWORD",name:"password",id:"passwordInput",value:o,ref:function(t){e.passwordInput=t},onChange:this.handleInput,onBlur:this.handleBlur}),s.a.createElement(E,{isLoading:t}),s.a.createElement("div",{className:"form__error"},s.a.createElement("div",null,r?"Username is required":""),s.a.createElement("div",null,l?"Password is required":""),s.a.createElement("div",null,i.isError?i.message:"")),s.a.createElement("input",{type:"submit",value:"LET ME IN",id:"submitBtn",onClick:this.handleSubmit})))))))}}]),t}(n.Component)),I=a(43),S=a(42),w=(a(37),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,isOpen:!1,login:{isLoggedIn:!f.a.isEmpty(b.getLocals("token")),username:localStorage.getItem("username"),token:localStorage.getItem("token")}},a.handleLoginModal=a.handleLoginModal.bind(Object(u.a)(Object(u.a)(a))),a.handleLogin=a.handleLogin.bind(Object(u.a)(Object(u.a)(a))),a.handleLogout=a.handleLogout.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleLogout",value:function(){var e=this;L.call({method:"POST",url:"https://api.devrant.thusitha.site/v1/user.deactivate",param:{}}).then(function(t){t.ok&&(e.setState({login:{isLoggedIn:!1,username:"",token:""}}),b.removeLocals(["token","username"]))})}},{key:"handleLogin",value:function(e,t){this.setState({isOpen:!1,login:{isLoggedIn:!0,username:e,token:t}}),b.setLocals({token:this.state.login.token,username:this.state.login.username}),document.getElementById("loginModal").classList.toggle("popup--open")}},{key:"handleLoginModal",value:function(){var e=this.state.isOpen;this.setState({isOpen:!e}),document.getElementById("loginModal").classList.toggle("popup--open"),e||document.getElementById("usernameInput").focus()}},{key:"render",value:function(){var e=this,t=this.state.isLoading;return s.a.createElement(I.a,null,s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"page"},s.a.createElement(p,{isLoggedIn:this.state.login.isLoggedIn,username:this.state.login.username,handleLoginModal:this.handleLoginModal,handleLogout:this.handleLogout}),s.a.createElement("section",{className:"main layout--center"},s.a.createElement("div",{className:"main__content layout--wrapped"},s.a.createElement(E,{isLoading:t}),s.a.createElement(S.a,{path:"/",exact:!0,render:function(t){return s.a.createElement(O,Object.assign({},t,{handleLoginModal:e.handleLoginModal}))}}),s.a.createElement(S.a,{path:"/rant/:id",component:N}),s.a.createElement(k,{handleLogin:this.handleLogin,handleLoginModal:this.handleLoginModal}))))))}}]),t}(n.Component)),M=document.getElementById("root");r.a.render(s.a.createElement(w,null),M)}},[[19,2,1]]]);
//# sourceMappingURL=main.0bd23398.chunk.js.map